#!/usr/bin/env bash

if [ "$#" -lt "3" ]; then
    echo 'Usage: "<Matching Name>" "<New Email>" <rev-list>'
    exit 1
fi

export NAME=$1
shift

export EMAIL=$1
shift

git filter-branch -f --env-filter 'if [ "$GIT_AUTHOR_NAME" = "$NAME" ]; then export GIT_AUTHOR_EMAIL="$EMAIL" GIT_COMMITTER_EMAIL="$EMAIL"; fi' -- $@
